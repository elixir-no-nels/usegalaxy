#!/usr/bin/env python3
import argparse


from bioblend import galaxy


def main():

    parser = argparse.ArgumentParser(description='get-workflows: export workflows from a galaxy instance ')

    parser.add_argument('-a', '--api_key', required=True, help="Galaxy admin user API key (required if not defined in the tools list file)")
    parser.add_argument('-g', '--galaxy',  required=True, help="Target Galaxy instance URL/IP address")


    args = parser.parse_args()
    url = args.galaxy
    api_key = args.api_key

    gi = galaxy.GalaxyInstance(url=url, key=api_key)

    wfs = gi.workflows.get_workflows()
    for wf in wfs:
        print( wf )
        print(gi.workflows.export_workflow_dict(wf['id']))



if __name__ == "__main__":
    main()

